#!/usr/bin/env python

import json
import logging
import sys

from   apidoc import inspector

#-------------------------------------------------------------------------------

if __name__ == "__main__":
    logging.getLogger().setLevel(logging.DEBUG)

    args = sys.argv
    if len(args) == 2:
        _, modname = args
        objname = None
    elif len(args) == 3:
        _, modname, objname = args
    else:
        print("usage: {} MODNAME [ OBJNAME ]".format(argv[0]), file=sys.stderr)
        sys.exit(2)

    doc = inspector.inspect_module(modname)
    if objname is not None:
        doc = doc["dict"][objname]
    json.dump(doc, sys.stdout, indent=2)


