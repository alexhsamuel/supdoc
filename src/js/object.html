<div class="container" ng-controller="ObjectController">
  <div class="header" ng-if="obj">
    <div class="subtitle">{{obj.type}}</div>
    <div class="title">{{obj.name || obj.modname}}
      <!-- FIXME: DRY -->
      <span class="parameters" ng-if="obj.parameters">(<span ng-repeat="p in obj.parameters"><span class="parameter">{{p.name}}</span><span ng-if="!$last">, </span></span>)</span>
    </div>
    <div class="doc" ng-show="obj.summary || obj.doc">
      <div class="summary">{{obj.summary}}</div>
      <div class="" compile="obj.doc"></div>
    </div>
  </div>

  <!-- Show this instead if the object name is invalid.  -->
  <div class="alert alert-danger" role="alert" ng-if="! obj">
    <span class="glyphicon glyphicon-remove"></span>
    No object named <span class="identifier">{{objname}}</span>
    in module <span class="identifier">{{modname}}</span>.
  </div>

  <div style="float: right; color: white; margin: 20px;"> <!-- FIXME: Boo. -->
    <label class="checkbox-inline">
      <input type="checkbox" ng-model="showImported"> Imported
    </label>
    <label class="checkbox-inline">
      <input type="checkbox" ng-model="showInherited"> Inherited
    </label>
    <label class="checkbox-inline">
      <input type="checkbox" ng-model="showDocs"> Full Docs
    </label>
  </div>

  <div class="attributes">
    <h3 class="attributes">
      Attributes
      <!--
          FIXME: This doesn't work because Bootstrap check-boxes don't
          work with ng-model.

      <div class="check-boxes btn-group" data-toggle="buttons">
        <label class="btn btn-primary">
          <input type="checkbox" ng-model="showImported"> Imports
        </label>
        <label class="btn btn-primary">
          <input type="checkbox" ng-model="showInherited"> Inherited
        </label>
        <label class="btn btn-primary">
          <input type="checkbox" ng-model="showDocs"> Full Docs
        </label>
      </div>
      -->
    </h3>
    <dl>
      <div ng-repeat="attrname in getAttrNames(false) | filter:showAttr" ng-controller="Attrs" class="attribute">
        <dt class="dict-summary" >
          <span class="identifier type">{{attr.type}}</span>
          <!-- Imported names, i.e. names defined elsewhere.  -->
          <span ng-if="showOrigin(attr)">
            <obj name="{{attr.name}}" modname="{{attr.modname}}" class="attr-name">{{attrname}}</obj> 
          </span>
          <!-- Not imported names, i.e. names not defined elsewhere.  -->
          <span ng-if="! showOrigin(attr)">
            <obj name="{{attr.name}}" class="attr-name">{{attrname}}</obj>
          </span>
          <span class="parameters" ng-if="attr.parameters">(<span ng-repeat="p in attr.parameters"><span class="parameter">{{p.name}}</span><span ng-if="!$last">, </span></span>)</span>
          <span ng-repeat="tag in attr.tags" class="label label-info {{tag}}">
            {{tag}}
          </span>
          <span ng-if="attr.value">
            = <span class="identifier value">{{attr.value}}</span>
          </span>
        </dt>
        <dd class="dict-summary" ng-controller="Attrs">
          <span ng-if="showOrigin(attr)" class="import">
            <span class="arrow">&#8594;</span> imported from 
            <obj modname="{{attr.modname}}" name="">{{attr.modname}}</obj><span class="identifier"></span>
          </span>
          <span class="summary"><span compile="attr.summary"></span></span>
          <div ng-if="showDocs" class="apidoc doc animate-if">
            <div compile="attr.doc"></div>
          </div>
        </dd>
      </div>
    </dl>
  </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Details</h3>
        </div>
        <div class="panel-body">
          <dl class="dl-horizontal">
            <dt>from</dt>
            <dd><span class="filename">{{obj.path}}</span></dd>
          </dl>
        </div>
      </div>


      <div class="panel panel-default" ng-init="loadSource()">
        <div class="panel-heading">
          <h3 class="panel-title">Source</h3>
        </div>
        <pre class="panel-body">{{joinLines(source.slice(obj.lines[0], obj.lines[1]))}}</pre>
      </div>

</div>
